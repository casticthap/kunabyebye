<!DOCTYPE html>
<html lang="en-US">

<head>
	<meta name="viewport" content="user-scalable=no">
	<title>KunaByeBye - Kuna/Euro Računalo</title>
	<meta name="description" content="KunaByeBye Currency Converter; Author: jvb">
	<link rel="apple-touch-icon" sizes="120x120" href="/favicons/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png">
	<link rel="manifest" href="/favicons/site.webmanifest">
	<link rel="mask-icon" href="/favicons/safari-pinned-tab.svg" color="#5bbad5">
	<link rel="shortcut icon" href="/favicons/favicon.ico">
	<meta name="msapplication-TileColor" content="#da532c">
	<meta name="msapplication-config" content="/favicons/browserconfig.xml">
	<meta name="theme-color" content="#ffffff">
	<style>
		body {
			font-family: Söhne,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,Helvetica Neue,Arial
		}
		fieldset {
			display: flex-wrap;
			flex-direction: row;
			border-radius: 11px;
			font-size: 24px;
		}
		input {
			width: 41%;
			border-width: 1px;
			text-align: right;
			font-size: 64px;
			border-radius: 11px;
			caret-color: transparent;
		}
		input:disabled {
			background-color: white;
			color: black;
		}
		input:focus {
			background-color: #E9FFC9;
		}
		input::selection {
			background-color: #C9E9FF;
		}
		
		/* Chrome, Safari, Edge, Opera */
		input::-webkit-outer-spin-button,
		input::-webkit-inner-spin-button {
			-webkit-appearance: none;
			margin: 0;
		}
		/* Firefox */
		input[type=number] {
			-moz-appearance: textfield;
		}

		label { font-size: 64px; }
		img.kovanica {
			border-radius: 50%;
			box-shadow:    2px 2px #818589;
		}
		img.novcanica {
			box-shadow:    3px 3px #D3D3D3;
		}
		.ponisti {
			background:    #ff0000;
			background:    linear-gradient(#ff0000, #ea9999);
			border:        1px solid #556699;
			border-radius: 11px;
			box-shadow:    2px 2px #444444;
			padding:       20px 45px;
			color:         #ffffff;
			display:       inline-block;
			font:          normal bold 26px/1 "Open Sans", sans-serif;
			text-align:    center;
			max-height: 50%;
			align-self: top;
			vertical-align: top;
		}
	</style>
</head>

<body>
	<form>
		<fieldset>
			<legend>CIJENA</legend>
			<input id="ceur" type="number" inputmode="decimal" min=0 value=0.00>
			<label for="ceur">€</label>
			&nbsp;
			<input id="chrk" type="number" inputmode="decimal" min=0 value=0.00>
			<label for="chrk">Kn</label>
		</fieldset>
		<fieldset>
			<legend>UPLATA</legend>
			<input id="ueur" type="number" inputmode="decimal" min=0 value=0.00>
			<label for="ueur">€</label>
			&nbsp;
			<input id="uhrk" type="number" inputmode="decimal" min=0 value=0.00>
			<label for="uhrk">Kn</label>
			<div>
				<hr/>
				<span>ili dodaj klikom na ikone:</span>
				<div>
					<img src="images/hrk100.avif" class="kovanica" onclick="javascript:add(1)" alt="jedna kuna"/>
					<img src="images/hrk200.avif" class="kovanica" onclick="javascript:add(2)" alt="dvije kune"/>
					<img src="images/hrk500.avif" class="kovanica" onclick="javascript:add(5)" alt="pet kuna"/>
					<img src="images/hrk1000.avif" class="novcanica" onclick="javascript:add(10)" alt="deset kuna"/>
					<img src="images/hrk2000.avif" class="novcanica" onclick="javascript:add(20)" alt="dvadeset kuna"/>
					<img src="images/hrk5000.avif" class="novcanica" onclick="javascript:add(50)" alt="pedeset kuna"/>
					<img src="images/hrk10000.avif" class="novcanica" onclick="javascript:add(100)" alt="sto kuna"/>
					<img src="images/hrk20000.avif" class="novcanica" onclick="javascript:add(200)" alt="dvjesto kuna"/>
				</div>
				<div>
					<img src="images/hrk1.avif" class="kovanica" onclick="javascript:add(0.01)" alt="jedna lipa"/>
					<img src="images/hrk2.avif" class="kovanica" onclick="javascript:add(0.02)" alt="dvije lipe"/>
					<img src="images/hrk5.avif" class="kovanica" onclick="javascript:add(0.05)" alt="pet lipa"/>
					<img src="images/hrk10.avif" class="kovanica" onclick="javascript:add(0.10)" alt="deset lipa"/>
					<img src="images/hrk20.avif" class="kovanica" onclick="javascript:add(0.20)" alt="dvadeset lipa"/>
					<img src="images/hrk50.avif" class="kovanica" onclick="javascript:add(0.50)" alt="pedeset lipa"/>
					<div class="ponisti" onclick="javascript:setUplataHrk(0.00);">PONIŠTI UPLATU</div>
				</div>
			</div>
		</fieldset>
		<fieldset>
			<legend>POVRAT</legend>
			<input id="peur" type="number" value=0.00 disabled>
			<label for="peur">€</label>
			&nbsp;
			<input id="phrk" type="number" value=0.00 disabled>
			<label for="phrk">Kn</label>
		</fieldset>
	</span>
</form>
</body>

<script>
	document.querySelector('#chrk').addEventListener('input', e => hrk2eur(e, '#ceur'));
	document.querySelector('#ceur').addEventListener('input', e => eur2hrk(e, '#chrk'));
	document.querySelector('#chrk').addEventListener('input', updatePovrat);
	document.querySelector('#ceur').addEventListener('input', updatePovrat);

	document.querySelector('#uhrk').addEventListener('input', e => hrk2eur(e, '#ueur'));
	document.querySelector('#ueur').addEventListener('input', e => eur2hrk(e, '#uhrk'));
	document.querySelector('#uhrk').addEventListener('input', updatePovrat);
	document.querySelector('#ueur').addEventListener('input', updatePovrat);

	document.querySelector('#phrk').addEventListener('input', e => hrk2eur(e, '#peur'));
	document.querySelector('#peur').addEventListener('input', e => eur2hrk(e, '#phrk'));

	let clipboard = 0.00;

	function copy(self) {
		clipboard = self.target.value;
		self.target.value = '';
	}

	function paste(self) {
		if (self.target.value === '') {
			self.target.value = clipboard;
		}
	}

	for (const selector of ['#chrk', '#ceur', '#uhrk', '#ueur']) {
		document.querySelector(selector).addEventListener('click', e => copy(e));
		document.querySelector(selector).addEventListener('blur', e => paste(e));
	}

	let rate = 7.53450;

	function xchange(element, selector, rate) {
		element.target.value.replace(',', '.');
		let num = element.target.value * rate;
		num = num.toFixed(2);
		document.querySelector(selector).value = num;
	}

	function eur2hrk(element, selector) { xchange(element, selector, rate); }
	function hrk2eur(element, selector) { xchange(element, selector, (1/rate)); }

	function updatePovrat() {
		updatePEur();
		updatePHrk();
	}
	function updatePEur() { diff('#ueur','#ceur','#peur'); }
	function updatePHrk() { diff('#uhrk','#chrk','#phrk'); }
	function diff(uid, cid, pid) {
		let num = document.querySelector(uid).value - document.querySelector(cid).value;
		if (num < 0) num = 0;
		num = num.toFixed(2);
		document.querySelector(pid).value = num;
	}

	function add(value) {
		setUplataHrk(parseFloat(document.querySelector('#uhrk').value) + parseFloat(value));
	}

	function setUplataHrk(value) {
		let element = document.querySelector('#uhrk');
		element.value = value.toFixed(2);
		element.dispatchEvent(new Event('input', {bubbles:true}));
		element.focus();
		updatePovrat();
	}

</script>
</html>
